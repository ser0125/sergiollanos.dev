<aside>
  <nav>
    <ul>
      <li>
        <a href="#about" class="nav-link">
          <div class="menu-container">
            <img
              src="/sergiollanos.dev/assets/icons/triangle.svg"
              alt="Triangle Icon"
            /> ABOUT ME
          </div>

          <span class="icon"></span>
        </a>
      </li>
      <li>
        <a href="#experience" class="nav-link">
          <div class="menu-container">
            <img
              src="/sergiollanos.dev/assets/icons/circle.svg"
              alt="Circle Icon"
            />
            EXPERIENCE
          </div>
          <span class="icon"></span>
        </a>
      </li>
      <li>
        <a href="#resume" class="nav-link">
          <div class="menu-container">
            <img src="/sergiollanos.dev/assets/icons/x.svg" alt="X Icon" />
            RESUME
          </div>
          <span class="icon"></span>
        </a>
      </li>
      <li>
        <a href="#contact" class="nav-link">
          <div class="menu-container">
            <img
              src="/sergiollanos.dev/assets/icons/square.svg"
              alt="Square Icon"
            />
            CONTACT
          </div>
          <span class="icon"></span>
        </a>
      </li>
    </ul>
  </nav>
</aside>

<style>
  nav {
    display: flex;
    flex-direction: column;
    flex: 0 0 auto;
    gap: 20px;
    padding: 10px;
    color: #fff;
    position: sticky;
    top: 24px;
    border-radius: 0.5em;
    padding: 1.7em 2.5em;
    background-color: #000;
    min-width: 200px;
  }
  ul {
    padding: 0;
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  a {
    text-decoration: none;
    color: #fff;
    opacity: 0.5;
    transition: opacity 0.3s ease;
    display: flex;
    justify-content: space-between;
  }

  .icon {
    width: 24px;
    height: 24px;
    display: flex;
    opacity: 0;
    transition:
      opacity 0.3s ease,
      transform 0.3s ease;
    background-image: url("/sergiollanos.dev/assets/icons/control4.png");
    background-size: contain;
    background-repeat: no-repeat;
  }
  .menu-container {
    display: flex;
    gap: 20px;
    align-items: center;
  }

  a.active .icon {
    display: flex;
    opacity: 1;
    transition:
      opacity 0.3s ease,
      transform 0.3s ease;
  }
  a.active {
    opacity: 1;
    font-weight: bold;
  }

  a:hover {
    font-weight: bold;
    opacity: 1;
    -webkit-background-clip: text;
    background-clip: text;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const links = document.querySelectorAll(
      ".nav-link"
    ) as NodeListOf<HTMLAnchorElement>;
    const sections = Array.from(links).map(
      (link) =>
        document.querySelector(link.getAttribute("href")!) as HTMLElement
    );
    const activateLink = () => {
      const scrollPosition = window.scrollY;
      const maxScrollPosition =
        document.documentElement.scrollHeight - window.innerHeight;
      let isActiveSet = false;

      sections.forEach((section, index) => {
        const sectionTop = section.offsetTop;
        const sectionBottom = sectionTop + section.offsetHeight;

        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
          links.forEach((link) => link.classList.remove("active"));
          links[index].classList.add("active");
          isActiveSet = true;
        }
      });

      if (scrollPosition >= maxScrollPosition) {
        links.forEach((link) => link.classList.remove("active"));
        const contactLink = document.querySelector('a[href="#contact"]');
        if (contactLink) contactLink.classList.add("active");
        isActiveSet = true;
      }

      if (!isActiveSet) {
        links.forEach((link) => link.classList.remove("active"));
      }
    };

    window.addEventListener("scroll", activateLink);
    activateLink();
  });
</script>
